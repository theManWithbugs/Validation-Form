{% extends 'commons/include/new_base.html' %}
{% load static %}

{% block css %}
    <link href="{% static 'css/busca.css' %}" rel="stylesheet">
{% endblock %}

{% block content %}
    <div class="container">
            {% if cidadao.cpf %}
                <h2 class="text-center" style="margin-top: 20px;">{{ cidadao.nome }}</h2>
                
                <div class="section-title">
                    <h3>Informações Pessoais</h3>
                </div>
                <div class="info-item">
                    <p><strong>CPF:</strong> {{ cidadao.cpf }}</p>
                    <p><strong>Nome Social:</strong> {{ cidadao.nome_social }}</p>
                    <p><strong>Endereço:</strong> {{ cidadao.endereco }}</p>
                    <p><strong>Situação de moradia, tipo de ocupação:</strong> {{ cidadao.moradia_situacao }}</p>
                    <p><strong>Cidade:</strong> {{ cidadao.cidade }}</p>
                    <p><strong>Telefone:</strong> {{ cidadao.telefone }}</p>
                    <p><strong>Estado:</strong> {{ cidadao.estado }}</p>
                    <p><strong>Data de Nascimento:</strong> {{ cidadao.data_nascimento }}</p>
                    <p><strong>Idade:</strong> {{ cidadao.idade }}</p>
                    <p><strong>Naturalidade:</strong> {{ cidadao.naturalidade }}</p>
                    <p><strong>Sexo:</strong> {{ cidadao.sexo }}</p>
                    <p><strong>Mãe:</strong> {{ cidadao.mae }}</p>
                    <p><strong>Estado Civil:</strong> {{ cidadao.estado_civil }}</p>
                    <p><strong>Remuneração:</strong> {{ cidadao.remuneracao }}</p>
                    <p><strong>Renda Individual:</strong> {{ cidadao.renda_individual }}</p>
                    <p><strong>Cor/Raça:</strong> {{ cidadao.cor_raca }}</p>
                    <p><strong>Escolaridade:</strong> {{ cidadao.escolaridade }}</p>
                </div>

                <div class="section-title">
                    <h3>Histórico de Saúde</h3>
                </div>
                <div class="info-item">
                    {% if historico_saude %}
                        <p><strong>Se apresenta problema de saúde qual?:</strong> {{ historico_saude.saude }}</p>
                        <p><strong>Apresenta problemas de saude?:</strong> {{ historico_saude.saude_just }}</p>
                        <p><strong>Faz ou fez tratamento psiquiatrico?:</strong> {{ historico_saude.tratamento_psi }}</p>
                        <p><strong>Especifique o tratamento psiquiatrico::</strong> {{ historico_saude.tratamento_psi_jus }}</p>
                        <p><strong>Faz uso de alguma medicação controlada?:</strong> {{ historico_saude.medicacao_controlada }}</p>
                        <p><strong>Especifique o tipo de medicação controlada::</strong> {{ historico_saude.medicacao_controlada_jus }}</p>
                        <p><strong>É portador de alguma deficiência:</strong> {{ historico_saude.deficiencia }}</p>
                        <p><strong>Faz ou já fez uso de::</strong> {{ historico_saude.drogas_uso }}</p>
                        <p><strong>Já procurou tratamento?:</strong> {{ historico_saude.tratamento }}</p>
                    {% else %}
                        <p>Histórico de saúde não disponível.</p>
                    {% endif %}
                </div>

                <div class="section-title">
                    <h3>Histórico Criminal</h3>
                </div>
                <div class="info-item">
                    {% if historico_criminal %}
                        <p><strong>Já Esteve Preso:</strong> {{ historico_criminal.ja_esteve_preso }}</p>
                        <p><strong>Por qual motivo esteve preso?:</strong> {{ historico_criminal.prisao_justificativa }}</p>
                        <p><strong>Alguém da sua familia já esteve preso?:</strong> {{ historico_criminal.prisao_familiar }}</p>
                        <p><strong>Número do processo:</strong> {{ historico_criminal.numero_do_processo }}</p>
                        <p><strong>Juiz de Origem:</strong> {{ historico_criminal.juiz_de_origem }}</p>
                        <p><strong>Medida Aplicada:</strong> {{ historico_criminal.medida_aplicada }}</p>
                        <p><strong>Tipo Penal:</strong> {{ historico_criminal.tipo_penal }}</p>
                        <p><strong>Em caso de violência domestica:</strong> {{ historico_criminal.violencia_domestica }}</p>
                        <p><strong>Nome da vitima de violência domestica:</strong> {{ historico_criminal.violencia_dome_nome_vitima }}</p>
                        <p><strong>Grau de parentesco da vitima:</strong> {{ historico_criminal.grau_de_parentesco }}</p>
                        <p><strong>Relata reincidência?::</strong> {{ historico_criminal.reincidencia }}</p>
                        <p><strong>Sugestão de Trabalho:</strong> {{ historico_criminal.sugestao_de_trabalho }}</p>
                        <p><strong>Sugestão de Encaminhamento:</strong> {{ historico_criminal.sugest_encaminhamento }}</p>
                    {% else %}
                        <p>Histórico criminal não disponível.</p>
                    {% endif %}
                </div>

                <div class="section-title">
                    <h3>Informações Complementares</h3>
                </div>
                <div class="info-item">
                    {% if informacoes_complementares %}
                        <p><strong>Quantas Pessoas:</strong> {{ informacoes_complementares.quantas_pessoas }}</p>
                        <p><strong>Nome Familiar:</strong> {{ informacoes_complementares.nome_familiar }}</p>
                        <p><strong>Parentesco:</strong> {{ informacoes_complementares.parentesco }}</p>
                        <p><strong>Idade Familiar:</strong> {{ informacoes_complementares.idade_familiar }}</p>
                        <p><strong>Escolaridade Familiar:</strong> {{ informacoes_complementares.escolaridade_familiar }}</p>
                        <p><strong>Ocupação:</strong> {{ informacoes_complementares.ocupacao }}</p>
                        <p><strong>Análise Descritiva:</strong> {{ informacoes_complementares.analise_descritiva }}</p>
                        <p><strong>Técnico Responsável pelo Acolhimento:</strong> {{ informacoes_complementares.tecnico_responsavel }}</p>
                        <p><strong>Tipo Penal:</strong> {{ informacoes_complementares.tip_penal }}</p>
                        <p><strong>Medida de Cumprimento:</strong> {{ informacoes_complementares.medida_cumprimento }}</p>
                        <p><strong>Data de Entrada:</strong> {{ cidadao.data_entrada }}</p>
                    {% else %}
                        <p>Informações complementares não disponíveis.</p>
                    {% endif %}

                    <br>

                <div class="violen_process">
                    {% if form_violen %}
                        <h3 class="d-flex justify-content-center">(PROCESSOS POR VIOLENCIA DOMESTICA)</h3>
                            {% for items in form_violen %}
                            <div class="container bg-dark d-flex justify-content-center mt-2 p-1" style="border: solid 1px; color: white; border-radius: 10px;">
                                <p><strong> Número do processo: ======>> </strong><a class="btn btn-info" href="{% url 'violen_info' items.process_referente %}" value=" items.process_referente "> {{  items.process_referente }}</a></p>
                                <p>STATUS: <strong style="color: red;"> {{ items.status_process }} </strong></p>
                            </div>
                            {% endfor %}
                        {% else %}
                        <p><strong style="color: crimson; font-size: larger;">Não possui registro de violência domestica</strong></p>
                    {% endif %}
                    <form method="post" action="{% url 'excluir_form' %}">
                        {% csrf_token %}
                        <input type="hidden" name="cpf" value="{{ cidadao.cpf }}">
                        <h5 class="d-flex justify-content-center mt-5" style="font-family: Verdana, Geneva, Tahoma, sans-serif">
                            <strong>Apenas administradores ou desenvolvedores podem excluir!</strong>
                            <i class="fas fa-exclamation-triangle" style="margin-left: 4px;"></i>
                        </h5>
                        <button class="btn btn-danger" type="submit" style="margin-left: 40%; margin-bottom: 15px;">Excluir Cidadão</button>
                    </form>
                </div>
            {% else %}
                <p class="text-center">Cidadão não encontrado.</p>
            {% endif %}
    </div>
{% endblock content %}


